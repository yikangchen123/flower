<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ÂÖ±‰∫´Ëä±Êùü</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif; 
            background: #f9f3f0; 
            margin: 0; 
            padding: 20px;
        }
        .flower-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); 
            gap: 15px; 
            margin: 20px auto; 
            max-width: 900px; 
        }
        .flower-card { 
            border: 1px solid #ddd; 
            border-radius: 10px; 
            padding: 10px; 
            cursor: pointer; 
            transition: all 0.3s; 
            background: white; 
        }
        .flower-card:hover { 
            transform: scale(1.05); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); 
        }
        .flower-emoji { 
            font-size: 50px; 
            text-align: center; 
        }
        .bouquet { 
            position: relative; 
            width: 100%; 
            height: 70vh; 
            margin: 20px auto; 
            background: #f5f5f5; 
            border-radius: 10px; 
            overflow: hidden; 
        }
        .single-flower { 
            position: absolute; 
            cursor: pointer; 
            transition: all 0.3s; 
        }
        .single-flower:hover { 
            transform: scale(1.2); 
        }
        .modal { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.7); 
            z-index: 100; 
            justify-content: center; 
            align-items: center; 
        }
        .modal-content { 
            background: white; 
            padding: 20px; 
            border-radius: 10px; 
            width: 80%; 
            max-width: 500px; 
        }
        textarea { 
            width: 100%; 
            height: 100px; 
            margin: 20px 0; 
            font-family: inherit; 
        }
        button { 
            background: #ff6b9d; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 16px; 
        }
    </style>
</head>
<body>
    <div id="selection-page">
        <h1>ÈÄâÊã©‰Ω†ÂñúÊ¨¢ÁöÑËä±</h1>
        <div class="flower-grid" id="flower-grid"></div>
    </div>

    <div id="input-page" style="display:none;">
        <div class="modal" style="display:flex;">
            <div class="modal-content">
                <h2 id="selected-flower-name"></h2>
                <div id="selected-flower-img" class="flower-emoji"></div>
                <textarea id="message" placeholder="ÂÜô‰∏ã‰Ω†ÁöÑÁ•ùÁ¶è..."></textarea>
                <button id="submit-btn">ÂÆåÊàê</button>
            </div>
        </div>
    </div>

    <div id="bouquet-page" style="display:none;">
        <h1>Êàë‰ª¨ÁöÑÂÖ±‰∫´Ëä±Êùü</h1>
        <div class="bouquet" id="bouquet"></div>
        <button id="back-btn">ËøîÂõûÈÄâÊã©</button>
    </div>

    <script>
        // Ê®°ÊãüJavaÂêéÁ´ØÁöÑÊï∞ÊçÆÂ∫ìÂäüËÉΩ
        class FlowerDatabase {
            constructor() {
                this.flowers = JSON.parse(localStorage.getItem('flowerDatabase')) || [];
            }
            
            saveFlower(flowerData) {
                this.flowers.push(flowerData);
                localStorage.setItem('flowerDatabase', JSON.stringify(this.flowers));
                return true;
            }
            
            getAllFlowers() {
                return this.flowers;
            }
            
            clearDatabase() {
                this.flowers = [];
                localStorage.removeItem('flowerDatabase');
            }
        }

        // ÂâçÁ´Ø‰∏öÂä°ÈÄªËæë
        const flowers = [
            { name: "Áé´Áë∞", emoji: "üåπ" }, { name: "Â∫∑‰πÉÈ¶®", emoji: "üå∏" },
            { name: "ÂêëÊó•Ëëµ", emoji: "üåª" }, { name: "ÁôæÂêà", emoji: "üíÆ" },
            { name: "ÈÉÅÈáëÈ¶ô", emoji: "üå∑" }, { name: "Ê®±Ëä±", emoji: "üå∏" },
            { name: "ËèäËä±", emoji: "üåº" }, { name: "Ëé≤Ëä±", emoji: "ü™∑" },
            { name: "‰∏âËâ≤Â†á", emoji: "üèµÔ∏è" }, { name: "Ëí≤ÂÖ¨Ëã±", emoji: "üåæ" },
            { name: "Á¥´ÁΩóÂÖ∞", emoji: "üíú" }, { name: "È£é‰ø°Â≠ê", emoji: "üå±" },
            { name: "ÈìÉÂÖ∞", emoji: "üîî" }, { name: "Áâ°‰∏π", emoji: "üå∫" },
            { name: "ËåâËéâ", emoji: "üåø" }, { name: "Ëñ∞Ë°£Ëçâ", emoji: "ü™ª" },
            { name: "ÈõèËèä", emoji: "üåº" }, { name: "Ê∞¥‰ªô", emoji: "üåº" },
            { name: "Êµ∑Ê£†", emoji: "üå∫" }, { name: "Ê¢ÖËä±", emoji: "‚ùÑÔ∏è" },
            { name: "ÂÖ∞Ëä±", emoji: "ü™¥" }, { name: "Â±±Ëå∂Ëä±", emoji: "üå∫" },
            { name: "ÊùúÈπÉ", emoji: "üå∫" }, { name: "Ê†ÄÂ≠êËä±", emoji: "üåº" },
            { name: "Êª°Â§©Êòü", emoji: "‚ú®" }, { name: "Ëù¥Ëù∂ÂÖ∞", emoji: "ü¶ã" },
            { name: "È©¨ËπÑËé≤", emoji: "üå∑" }, { name: "Áü≥Á´π", emoji: "üå∏" },
            { name: "‰ªôÂÆ¢Êù•", emoji: "üëº" }, { name: "Êú®Ê£âËä±", emoji: "‚òÅÔ∏è" }
        ];

        const database = new FlowerDatabase();
        let selectedFlower = null;

        // ÂàùÂßãÂåñËä±ÊúµÈÄâÊã©ÁΩëÊ†º
        const flowerGrid = document.getElementById('flower-grid');
        flowers.forEach(flower => {
            const card = document.createElement('div');
            card.className = 'flower-card';
            card.innerHTML = `
                <div class="flower-emoji">${flower.emoji}</div>
                <p>${flower.name}</p>
            `;
            card.addEventListener('click', () => selectFlower(flower));
            flowerGrid.appendChild(card);
        });

        function selectFlower(flower) {
            selectedFlower = flower;
            document.getElementById('selection-page').style.display = 'none';
            document.getElementById('input-page').style.display = 'block';
            
            document.getElementById('selected-flower-name').textContent = flower.name;
            document.getElementById('selected-flower-img').textContent = flower.emoji;
        }

        document.getElementById('submit-btn').addEventListener('click', () => {
            const message = document.getElementById('message').value.trim();
            if (!message) {
                alert('ËØ∑ËæìÂÖ•‰Ω†ÁöÑÁ•ùÁ¶èËØ≠');
                return;
            }
            
            const flowerData = {
                flower: selectedFlower,
                message: message,
                position: {
                    x: Math.random() * 80 + 10,
                    y: Math.random() * 80 + 10
                },
                size: Math.random() * 20 + 30,
                timestamp: new Date().getTime()
            };
            
            database.saveFlower(flowerData);
            showBouquet();
        });

        document.getElementById('back-btn').addEventListener('click', () => {
            document.getElementById('bouquet-page').style.display = 'none';
            document.getElementById('selection-page').style.display = 'block';
            document.getElementById('message').value = '';
        });

        function showBouquet() {
            document.getElementById('input-page').style.display = 'none';
            document.getElementById('bouquet-page').style.display = 'block';
            
            const bouquetContainer = document.getElementById('bouquet');
            bouquetContainer.innerHTML = '';
            
            const allFlowers = database.getAllFlowers();
            
            allFlowers.forEach(flowerData => {
                const flower = document.createElement('div');
                flower.className = 'single-flower';
                flower.innerHTML = `
                    <div style="font-size: ${flowerData.size}px;">${flowerData.flower.emoji}</div>
                `;
                flower.style.left = `${flowerData.position.x}%`;
                flower.style.top = `${flowerData.position.y}%`;
                
                flower.addEventListener('click', () => {
                    alert(`${flowerData.flower.name}\n\n${flowerData.message}`);
                });
                
                bouquetContainer.appendChild(flower);
            });
        }

        // ÂàùÂßãÂåñÊòæÁ§∫
        if (database.getAllFlowers().length > 0) {
            showBouquet();
        }
    </script>
</body>
</html>